{"version":3,"file":"static/webpack/static/development/pages/form.js.61045e70113643e8c73f.hot-update.js","sources":["webpack:///./pages/form/index.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport Router from \"next/router\";\nimport * as routes from \"./../../../reusecore/src/constants/routes\";\nimport { AppWrapper } from \"../../containers/App/app.style\";\nimport { AppWithAuthentication } from \"./../../containers/App\";\nimport * as typeformEmbed from \"@typeform/embed\";\nimport axios from 'axios';\n\n\n// const form_id = 'A7bW0z';\n// const token = 'DLrXyVaPwwS7VhFoL84VwKvcqc5rP8x9fEARcVJRt5Sg';\n\nclass Form extends Component {\n  componentDidMount() {\n    typeformEmbed.makeWidget(\n      embedElement,\n      \"https://dhakon.typeform.com/to/A7bW0z\",\n      {\n        hideHeaders: true,\n        hideFooter: true,\n        opacity: 75,\n        onSubmit: function () {\n          Router.push(routes.LANDING);\n\n          axios.get(`/forms/A7bW0z/responses`, {\n            headers: {\n              'Authorization': `Bearer DLrXyVaPwwS7VhFoL84VwKvcqc5rP8x9fEARcVJRt5Sg`\n            }\n          })\n            .then(function (response) {\n              // handle success\n\n              const res = response.data.items[0]\n\n              const name = res.answers[0].text\n              const phone = res.answers[1].phone_number\n              const type_work = res.answers[2].choice.label\n              const number_workers = res.answers[3].number\n              const duration = res.answers[4].choice.label\n              const address = res.answers[5].text\n\n              axios.post('/message', {\n                body: `Assalamu'alaikum Bapak/Ibu ${name}. \\n Anda baru saja mencari buruh untuk ${type_work} sebanyak ${number_workers} orang dengan durasi ${duration} disawah ${address}. \\n Sabar ya... setelah ini Anda akan dihubungi tim Dhakon.`,\n                to: phone,\n                from: '+17609933055'\n              })\n                .then(function (response) {\n                  // console.log('response success', response);\n                })\n                .catch(function (error) {\n                  // console.log('response error', error);\n                });\n\n            })\n            .catch(function (error) {\n              // handle error\n              console.log('response error : ', error);\n            })\n        }\n      }\n    );\n  }\n\n  handleSubmit = () => {\n    Router.push(routes.LANDING);\n  };\n\n  render() {\n    return (\n      <AppWithAuthentication>\n        <AppWrapper id=\"embedElement\" />\n      </AppWithAuthentication>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  authUser: state.sessionState.authUser\n});\n\nexport default connect(mapStateToProps)(Form);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;AACA;;;;;;AArDA;AACA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AADA;AADA;AAMA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAHA;AAOA;AAGA;AAEA;AAEA;AACA;AACA;AACA;AAzCA;AA4CA;;;AAMA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;AA7DA;AACA;AA+DA;AAAA;AACA;AADA;AAAA;AACA;AAGA;;;;A","sourceRoot":""}
{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport Router from \"next/router\";\nimport * as routes from \"./../../../reusecore/src/constants/routes\";\nimport { AppWrapper } from \"../../containers/App/app.style\";\nimport { AppWithAuthentication } from \"./../../containers/App\";\nimport typeformEmbed from '@typeform/embed';\nimport axios from \"axios\"; // const form_id = 'A7bW0z';\n// const token = 'DLrXyVaPwwS7VhFoL84VwKvcqc5rP8x9fEARcVJRt5Sg';\n\nclass Form extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"handleSubmit\", () => {\n      Router.push(routes.LANDING);\n    });\n  }\n\n  componentDidMount() {\n    typeformEmbed.makeWidget(embedElement, \"https://dhakon.typeform.com/to/A7bW0z\", {\n      hideHeaders: true,\n      hideFooter: true,\n      opacity: 75,\n      onSubmit: function () {\n        Router.push(routes.LANDING);\n        axios.get(`/forms/A7bW0z/responses`, {\n          headers: {\n            Authorization: `Bearer DLrXyVaPwwS7VhFoL84VwKvcqc5rP8x9fEARcVJRt5Sg`\n          }\n        }).then(function (response) {\n          // handle success\n          const res = response.data.items[0];\n          const name = res.answers[0].text;\n          const phone = res.answers[1].phone_number;\n          const type_work = res.answers[2].choice.label;\n          const number_workers = res.answers[3].number;\n          const duration = res.answers[4].choice.label;\n          const address = res.answers[5].text;\n          axios.post(\"/message\", {\n            body: `Assalamu'alaikum Bapak/Ibu ${name}. \\n Anda baru saja mencari buruh untuk ${type_work} sebanyak ${number_workers} orang dengan durasi ${duration} disawah ${address}. \\n Sabar ya... setelah ini Anda akan dihubungi tim Dhakon.`,\n            to: phone,\n            from: \"+17609933055\"\n          }).then(function (response) {// console.log('response success', response);\n          }).catch(function (error) {// console.log('response error', error);\n          });\n        }).catch(function (error) {\n          // handle error\n          console.log(\"response error : \", error);\n        });\n      }\n    });\n  }\n\n  render() {\n    return __jsx(AppWithAuthentication, null, __jsx(AppWrapper, {\n      id: \"embedElement\"\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  authUser: state.sessionState.authUser\n});\n\nexport default connect(mapStateToProps)(Form);","map":null,"metadata":{},"sourceType":"module"}
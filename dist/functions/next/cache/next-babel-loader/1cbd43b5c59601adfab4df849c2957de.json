{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport Router from \"next/router\";\nimport * as routes from \"./../../../reusecore/src/constants/routes\";\nimport { AppWrapper } from \"../../containers/App/app.style\";\nimport { AppWithAuthentication } from \"./../../containers/App\";\nimport typeformEmbed from '@typeform/embed';\nimport axios from \"axios\"; // const form_id = 'A7bW0z';\n// const token = 'DLrXyVaPwwS7VhFoL84VwKvcqc5rP8x9fEARcVJRt5Sg';\n\nvar Form =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Form, _Component);\n\n  function Form() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Form);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Form)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", function () {\n      Router.push(routes.LANDING);\n    });\n\n    return _this;\n  }\n\n  _createClass(Form, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      typeformEmbed.makeWidget(embedElement, \"https://dhakon.typeform.com/to/A7bW0z\", {\n        hideHeaders: true,\n        hideFooter: true,\n        opacity: 75,\n        onSubmit: function onSubmit() {\n          Router.push(routes.LANDING);\n          axios.get(\"/forms/A7bW0z/responses\", {\n            headers: {\n              Authorization: \"Bearer DLrXyVaPwwS7VhFoL84VwKvcqc5rP8x9fEARcVJRt5Sg\"\n            }\n          }).then(function (response) {\n            // handle success\n            var res = response.data.items[0];\n            var name = res.answers[0].text;\n            var phone = res.answers[1].phone_number;\n            var type_work = res.answers[2].choice.label;\n            var number_workers = res.answers[3].number;\n            var duration = res.answers[4].choice.label;\n            var address = res.answers[5].text;\n            axios.post(\"/message\", {\n              body: \"Assalamu'alaikum Bapak/Ibu \".concat(name, \". \\n Anda baru saja mencari buruh untuk \").concat(type_work, \" sebanyak \").concat(number_workers, \" orang dengan durasi \").concat(duration, \" disawah \").concat(address, \". \\n Sabar ya... setelah ini Anda akan dihubungi tim Dhakon.\"),\n              to: phone,\n              from: \"+17609933055\"\n            }).then(function (response) {// console.log('response success', response);\n            })[\"catch\"](function (error) {// console.log('response error', error);\n            });\n          })[\"catch\"](function (error) {\n            // handle error\n            console.log(\"response error : \", error);\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(AppWithAuthentication, null, __jsx(AppWrapper, {\n        id: \"embedElement\"\n      }));\n    }\n  }]);\n\n  return Form;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    authUser: state.sessionState.authUser\n  };\n};\n\nexport default connect(mapStateToProps)(Form);","map":null,"metadata":{},"sourceType":"module"}